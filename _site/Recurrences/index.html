<!DOCTYPE html>
<html lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

    <title>Recurrences</title>
    <meta name="description" content="My modified template for CalConnect" />

  
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/assets/materialize.css" />
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/assets/main.css">
    <link rel="canonical" href="/Recurrences/" />
    <link rel="alternate" type="application/rss+xml" title="CalConnect DEVGUIDE" href="/feed.xml" />
  
    
</head>


  <body>

    <nav class="deep-purple lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" class="brand-logo" href="/">CalConnect Developer's Guide</a>
    
    

          <ul class="right hide-on-med-and-down">
            <li><a href="/">Home </a></li>
            <li><a href="/Table-of-Contents/">Table of Contents</a></li>
            <li><a href="/Appendix/How-to-Contribute/">How to Contribute</a></li>
          </ul>

          <ul id="nav-mobile" class="side-nav">
            <li><a href="#">Home</a></li>
            <li><a href="/Table-of-Contents/">Table of Contents</a></li>
            <li><a href="/Appendix/How-to-Contribute/">How to Contribute</a></li>
          </ul>

      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
</nav>



        <div class="container">

    <h1 id="icalendar-recurrences">iCalendar Recurrences</h1>

<h2 id="what-is-recurrence">What is recurrence?</h2>

<p>A recurring event is one that repeats at regular or irregular intervals. For example, a weekly lunch meeting, an anniversary, etc. These often occur in real life and thus need to be represented in digital calendars and iCalendar. Recurring events are often the source of interoperability problems with iCalendar, so deserve special attention.</p>

<p>@startuml
skinparam object {
ArrowColor RoyalBlue
BorderColor RoyalBlue
}
title Example: Simple recurrent event</p>

<p>object “Recurrence 1” as r1
object “Recurrence 2” as r2
object “Recurrence <n>" as rn</n></p>

<p>r1 -right-&gt; r2
r2 -right-&gt; rn 
@enduml</p>

<p>In the real world, a recurrence pattern is typically based on common intervals of time (a day, a week, a month, a year, etc). Often times, a recurrence is not every week, but every other week, for example. So there needs to be a way to express an interval between each recurrence. Some types of recurrence never end - typically anniversaries, though often it is because no obvious end point can be identified. In other cases there is a well-known end point, determined either by the total number of recurrences (e.g., every day for the next three days), or a fixed end date (e.g., every week until the end of the month).</p>

<p>A number of more complex situations can arise, such as patterns tied to a specific day of the week within a month (e.g., the first Monday of each month), or an offset within the month (e.g., “pay day” - the last weekday of each month). All of these need to be represented in some fashion in a digital calendar.</p>

<p>Sometimes an event in a recurrence set needs to be removed (e.g., an every Monday pattern would produce an event that falls on a holiday, so that event needs to be cancelled). Alternatively, an event in a recurrence set mighty need to be rescheduled (e.g., due to a holiday, an event in an every Monday pattern is moved to Tuesday, rather than being cancelled). Such changes to the normal pattern of occurrence is called an exception.</p>

<p>Sometimes an irregular pattern exists - for example the Easter holiday is determined by a complex astronomical calculation that would not be trivial to represent in iCalendar. Or additional one-off meetings are scheduled (e.g., during one weekly meeting the participants agree to have a follow-up later in the week). To cope with these, it is possible to specify explicit dates for items in a recurrence set, rather than use a rule.</p>

<p>##iCalendar’s Implementation of Recurrences</p>

<p>iCalendar supports recurrences by allowing rules, specific dates, specific exception dates, and overridden instances to all be specified using properties and components. The recurrence properties can only appear in the component defining the master instance of a recurrence set - they can never be used in components representing overridden instances. This means that if the recurrence pattern needs to change in a significant manner (e.g., switching from a weekly meeting to a monthly meeting) then two separate events are needed: one for the old set of events with the original recurrence pattern, and one for the new set with the new pattern.</p>

<h3 id="the-rrule-property"><em>The <code class="highlighter-rouge">RRULE</code> Property</em></h3>

<p>Recurrence rules are defined via the <strong><code class="highlighter-rouge">RRULE</code></strong> property. The value of this property is a semicolon separated list of items describing various aspects of the recurrence pattern, such as the frequency (e.g., daily, weekly, monthly, yearly), the interval (e.g., every two weeks, or every fourth month), the total number of items the rule generates (e.g., repeat for five times), the point in time where the recurrence stops (e.g., repeat until the 4th of June).</p>

<p>Here are some simple examples:</p>

<ul>
  <li><strong><code class="highlighter-rouge">RRULE:FREQ=YEARLY</code></strong>
    <ul>
      <li><em>An event that occurs once a year on a specific date. i.e., an anniversary.</em></li>
    </ul>
  </li>
  <li><strong><code class="highlighter-rouge">RRULE:FREQ=DAILY;COUNT=3</code></strong>
    <ul>
      <li><em>An event that occurs every day for three days only.</em></li>
    </ul>
  </li>
  <li><strong><code class="highlighter-rouge">RRULE:FREQ=WEEKLY;INTERVAL=2</code></strong>
    <ul>
      <li><em>An event that occurs every two weeks.</em></li>
    </ul>
  </li>
  <li><strong><code class="highlighter-rouge">RRULE:FREQ=MONTHLY;BYMONTHDAY=-1</code></strong>
    <ul>
      <li><em>An event that occurs on the last day of every month.</em></li>
    </ul>
  </li>
</ul>

<p>An <strong><code class="highlighter-rouge">RRULE</code></strong> property can appear at most once in a calendar component. It is used only in the component that defines the master instance of a recurrence set (it can never be used in an overridden instance).</p>

<p>In order to determine a set of recurrences generated by a particular <strong><code class="highlighter-rouge">RRULE</code></strong>, a starting point is required. The starting point is defined by the value of the <strong><code class="highlighter-rouge">DTSTART</code></strong> property in the master component. For example, if <strong><code class="highlighter-rouge">DTSTART</code></strong> is set to the 4th of July of some year, and a yearly <strong><code class="highlighter-rouge">RRULE</code></strong> is specified, then the event occurs on the 4th of July of all years on or after the year specified in <strong><code class="highlighter-rouge">DTSTART</code></strong>. The <strong><code class="highlighter-rouge">RRULE</code></strong> itself might constrain what values are allowed for the <strong><code class="highlighter-rouge">DTSTART</code></strong> property - for example an <strong><code class="highlighter-rouge">RRULE</code></strong> that specifies a recurring event on the first Monday of every month, requires that the <strong><code class="highlighter-rouge">DTSTART</code></strong> of the master component falls on the first Monday of a month. i.e., the <strong><code class="highlighter-rouge">DTSTART</code></strong> of the master component must match the first instance of the recurrence pattern.</p>

<p>The full ics file for this example with three occurrences now looks like:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ABC Corporation//NONSGML My Product//EN
BEGIN:VEVENT
SUMMARY:Lunchtime meeting
UID:ff808181-1fd7389e-011f-d7389ef9-00000003@example.com
DTSTART;TZID=America/New_York:20160420T120000
DURATION:PT1H
LOCATION:Mo's bar - back room
RRULE:FREQ=WEEKLY;COUNT=3
END:VEVENT
END:VCALENDAR
</code></pre>
</div>

<p>@startuml
skinparam object {
ArrowColor RoyalBlue
BorderColor RoyalBlue
}
title Example: Simple recurrent event</p>

<p>object “Recurrence 1” as r1 {
  Lunchtime meeting
  week 1
}</p>

<p>object “Recurrence 2” as r2 {
  Lunchtime meeting
  week 2
}</p>

<p>object “Recurrence 3“ as r3 {
  Lunchtime meeting
  week 3
}</p>

<p>r1 -right-&gt; r2
r2 -right-&gt; r3 
@enduml</p>

<p>To fully understand all the possible variations of <strong><code class="highlighter-rouge">RRULE</code></strong> values, and possible patterns that can be generated, you need to read the <a href="https://tools.ietf.org/html/rfc5545">iCalendar specification</a>, in particular Sections <a href="https://tools.ietf.org/html/rfc5545#section-3.3.10">3.3.10</a> &amp; <a href="https://tools.ietf.org/html/rfc5545#section-3.8.5.3">3.8.5.3</a></p>

<h3 id="the-rdate-and-exdate-properties"><em>The <code class="highlighter-rouge">RDATE</code> and <code class="highlighter-rouge">EXDATE</code> Properties</em></h3>

<p>The <strong><code class="highlighter-rouge">RDATE</code></strong> property is used to specify one-off instances in a recurrence set. This is useful for cases where a “regular” pattern cannot be defined, or one off “exceptions” to a regular pattern. e.g., a weekly occurring event needs one additional event in one particular week to follow-up on items discussed in the previous meeting. The value of the <strong><code class="highlighter-rouge">RDATE</code></strong> determines the start (and possibly duration) of the one-off instance. The recurrence instance specified by the <strong><code class="highlighter-rouge">RDATE</code></strong> can also be overridden if some other aspect of the event differs from the master component.</p>

<p>The <strong><code class="highlighter-rouge">EXDATE</code></strong> property is used to remove instances from a recurrence set defined by an <strong><code class="highlighter-rouge">RRULE</code></strong>. For example, a weekly meeting might occur on a public holiday, and thus won’t take place so needs to be removed from the recurrence set.</p>

<p>The full ics file for this example with three occurrences without the second one now looks like:</p>

<pre><code>BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ABC Corporation//NONSGML My Product//EN
BEGIN:VEVENT
SUMMARY:Lunchtime meeting
UID:ff808181-1fd7389e-011f-d7389ef9-00000003
DTSTART;TZID=America/New_York:20160420T120000
DURATION:PT1H
LOCATION:Mo's bar - back room
RRULE:FREQ=WEEKLY;COUNT=3
<strong>EXDATE;TZID=America/New_York:20160427T120000</strong>
END:VEVENT
END:VCALENDAR
</code></pre>

<p>@startuml
skinparam object {
ArrowColor RoyalBlue
BorderColor RoyalBlue
}
title Example: Simple recurrent event</p>

<p>object “Recurrence 1” as r1 {
  Lunchtime meeting
  week 1
}</p>

<p>object “–Recurrence– –2–” as r2 {
}</p>

<p>object “Recurrence 3“ as r3 {
  Lunchtime meeting
  week 3
}</p>

<p>r1 -right-&gt; r3
@enduml</p>

<h3 id="overridden-instances"><em>Overridden Instances</em></h3>

<p>An overridden instance is one where one or more properties from the…</p>


</div>


    <footer class="white">
        <div class="container">
            <div><hr/></div>
            <div>
            	Was this page helpful for you? Please give us <a href="https://goo.gl/forms/NqKna6d4lsqUtlgD3" class="text-lighten-3" target="_new">Feedback</a>.
            </div>
            <div><hr/></div>
        </div>
</footer>
<footer class="page-footer deep-purple">
    <div class="footer-copyright">
        <div class="container">
            <div>
              <a href="https://www.calconnect.org/about/policies/copyright-licensing" class="deep-purple-text text-lighten-3">Copyright © The Calendaring and Scheduling Consortium</a>. The contents of this wiki are freely available licensed via a <a href="http://creativecommons.org/licenses/by/3.0/" class="deep-purple-text text-lighten-3">Creative Commons Attribution 3.0 Unported License</a>.
            </div>
        </div>
    </div>
</footer>

      
    <!--  Scripts-->
<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>
<script src="/js/init.js"></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-22761082-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- /Analytics -->


  </body>

</html>
